(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[37578],{517563:(e,i,t)=>{var n=t(970610),r=t(727418);function o(e,i){return i.encode?i.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,i){return Number(e)-Number(i)})).map((function(i){return e[i]})):e}i.extract=function(e){return e.split("?")[1]||""},i.parse=function(e,i){var t=function(e){var i;switch(e.arrayFormat){case"index":return function(e,t,n){i=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),i?(void 0===n[e]&&(n[e]={}),n[e][i[1]]=t):n[e]=t};case"bracket":return function(e,t,n){i=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),i?void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=[t]:n[e]=t};default:return function(e,i,t){void 0!==t[e]?t[e]=[].concat(t[e],i):t[e]=i}}}(i=r({arrayFormat:"none"},i)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),r=i.shift(),o=i.length>0?i.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),t(decodeURIComponent(r),o,n)})),Object.keys(n).sort().reduce((function(e,i){var t=n[i];return Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?e[i]=s(t):e[i]=t,e}),Object.create(null))):n},i.stringify=function(e,i){var t=function(e){switch(e.arrayFormat){case"index":return function(i,t,n){return null===t?[o(i,e),"[",n,"]"].join(""):[o(i,e),"[",o(n,e),"]=",o(t,e)].join("")};case"bracket":return function(i,t){return null===t?o(i,e):[o(i,e),"[]=",o(t,e)].join("")};default:return function(i,t){return null===t?o(i,e):[o(i,e),"=",o(t,e)].join("")}}}(i=r({encode:!0,strict:!0,arrayFormat:"none"},i));return e?Object.keys(e).sort().map((function(n){var r=e[n];if(void 0===r)return"";if(null===r)return o(n,i);if(Array.isArray(r)){var s=[];return r.slice().forEach((function(e){void 0!==e&&s.push(t(n,e,s.length))})),s.join("&")}return o(n,i)+"="+o(r,i)})).filter((function(e){return e.length>0})).join("&"):""}},970610:e=>{e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},584948:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin"]=function(){return t(83632).ZP}},237948:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]"]=function(){return t(83632).ZP}},646195:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]/add"]=function(){return t(83632).ZP}},148643:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/x"]=function(){return t(83632).ZP}},288177:(e,i,t)=>{t.d(i,{Z:()=>m});var n=t(667294),r=t(860370),o=t(911506),s=t(651392),a=t(549156),d=t(174523),c=t(899520),l=t(931185),p=t(181307),h=t(883119),u=t(785893);const g=e=>({color:e?"#fff":"#333",fontSize:18,fontWeight:"bold",background:"none",outline:"none",border:"none",marginTop:"4px",width:"100%"});function m(e){const i=(0,d.ZP)(),{backButtonIcon:t,name:m,onNextButtonTouch:x,onNameChange:b,selectedPinIds:f=[],useRoundedCorners:_}=e,y=(0,p.tc)("mweb_board_modals")().anyEnabled,j=f.length>0?130:64;return(0,u.jsxs)(o.Z,{hasFixedHeader:!0,children:[(0,u.jsxs)(c.$l,{hasBorder:!y,height:j,paddingY:y?3:void 0,useRoundedCorners:_,children:[(0,u.jsxs)(h.kC,{alignItems:"center",justifyContent:"between",children:[(0,u.jsx)(r.Z,{color:y?"darkGray":void 0,icon:t||"cancel",padding:y?3:void 0,size:y?"sm":void 0}),(0,u.jsx)(h.xv,{weight:"bold",children:i._("Add section","for add board section page","for add board section page")}),(0,u.jsx)(a.Z,{id:"create-section-button",children:(0,u.jsx)(h.zx,{accessibilityLabel:y?i._("Add","boardSectionCreate.Add.Button.Text","Add button accessibility label for board section create page"):i._("Next","Next button accessibility label for board section create page","Next button accessibility label for board section create page"),onClick:x,disabled:""===m.trim(),color:"red",size:y?"lg":"sm",text:i._("Next","Next button for board section create page","Next button for board section create page")})})]}),f&&(0,u.jsx)(s.Z,{selectedPinIds:f})]}),(0,u.jsx)(h.xu,{"data-test-id":"addSectionName",paddingX:y?2:void 0,paddingY:3,children:y?(0,u.jsx)(h.nv,{id:"section-name-input",label:i._("Name","boardSectionCreate.TextField.Name.Label","TextField label to Name on BoardSectionCreate"),onChange:e=>b(e.event),size:"lg",value:m}):(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(h.__,{htmlFor:"name",children:(0,u.jsx)(h.xv,{size:"sm",children:i._("Section name","name tag for board create page","name tag for board create page")})}),(0,u.jsx)("input",{id:"name",placeholder:i._("Add","name placeholder for board section create page","name placeholder for board section create page"),value:m,style:g((0,l.Yc)()),onChange:b})]})})]})}},491048:(e,i,t)=>{t.d(i,{Z:()=>l});var n=t(40142),r=t(263336),o=t(174523),s=t(250766),a=t(964964),d=t(883119),c=t(785893);function l({excludeBoardId:e,onRepinToBoard:i}){const t=(0,o.ZP)(),l=(()=>{const{userId:e}=(0,n.useSelector)((e=>e.session));return(0,a.mi)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),(0,n.useSelector)((e=>(0,s.Is)(e)||[]))})();return l.length>0&&(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginTop:3,children:(0,c.jsx)(d.xv,{children:t._("All boards","title for board picker all boards section","title for board picker all boards section")})}),(0,c.jsx)(d.xu,{paddingY:3,children:l.filter((i=>i.id!==e)).map((e=>(0,c.jsx)(r.Z,{boardId:e.id,onBoardSelected:()=>i(e)},e.id)))})]})}},804948:(e,i,t)=>{t.d(i,{Wx:()=>f,ZP:()=>j});var n=t(667294),r=t(40142),o=t(860370),s=t(968807),a=t(911506),d=t(491048),c=t(387501),l=t(651392),p=t(544039),h=t(174523),u=t(883119),g=t(708206),m=t(899520),x=t(483629),b=t(785893);function f({onAddNewSection:e,useIconWithBackground:i}){const t=(0,h.ZP)();return(0,b.jsx)(m.G_,{height:i?80:70,alignCenter:i,children:(0,b.jsx)(s.Z,{onTouch:e,pressState:"none",children:(0,b.jsxs)(u.xu,{display:"flex",alignItems:"center",padding:i?0:1,"data-test-id":"addSectionButton",children:[i?(0,b.jsx)(u.xu,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,b.jsx)(u.JO,{icon:"add",color:"darkGray",size:20,accessibilityLabel:t._("Create board button","RepinSection.CreateBoard.Button","accessibility label for create board button")})}):(0,b.jsx)(u.JO,{icon:"add-circle",color:"red",size:38,accessibilityLabel:t._("Add section button")}),i?(0,b.jsx)(u.xu,{marginStart:2,children:(0,b.jsx)(u.X6,{size:"sm",children:t._("Add section","Add new section to Pin to","Add new section to Pin to")})}):(0,b.jsx)(u.xu,{marginStart:3,children:(0,b.jsx)(u.xv,{weight:"bold",children:t._("Add section","Add new section to Pin to","Add new section to Pin to")})})]})})})}class _ extends n.PureComponent{constructor(...e){var i,t,n;super(...e),n=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(t="onRepinToBoard")in(i=this)?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n}render(){const{boardId:e,boardSectionId:i,orginalBoardId:t,onAddNewSection:n,repin:r,hideBoardPickerRow:s,selectedPinIds:p,isCollaborative:h}=this.props,g=t===e;return(0,b.jsxs)(a.Z,{hasFixedHeader:!0,children:[(0,b.jsxs)(m.$l,{hasBorder:!0,height:130,children:[(0,b.jsxs)(u.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(u.xu,{column:2,children:(0,b.jsx)(o.Z,{})}),(0,b.jsx)(u.xu,{column:8,children:(0,b.jsx)(u.xv,{align:"center",weight:"bold",children:this.props.i18n._("Choose section","title for section selection in repin flow","title for section selection in repin flow")})}),(0,b.jsx)(u.xu,{column:2})]}),(0,b.jsx)(l.Z,{selectedPinIds:p})]}),e&&(0,b.jsx)(c.Z,{boardId:e,repin:r,originalBoardId:t,hideBoardPickerRow:g&&s,sectionId:i}),g&&(0,b.jsxs)(u.xu,{children:[!h&&(0,b.jsx)(d.Z,{excludeBoardId:e,onRepinToBoard:this.onRepinToBoard}),(0,b.jsx)(f,{onAddNewSection:n})]})]})}}function y(e,i,t){return e?t._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move."):i?t._("Saved to section!"):t._("Saved to board!")}const j=(0,g.compose)(p.Z,(0,r.connect)(null,((e,{orginalBoardId:i,boardSectionId:t,onRefreshBoardSection:n,pinIds:r,inSelectAll:o,showToast:s,history:a})=>({repin:async(d,c,l)=>{const p=c&&c.id,h={boardId:i,sectionId:t},u={boardId:d,sectionId:p},g=o?(0,x.X_)({source:h,target:u,excludePinIds:r}):(0,x.ic)({source:h,target:u,pinIds:r});i!==d?(await e(g),a.go(-3)):(await e(g),n&&await n()),s({text:y(o,p,l)})},repinToOtherBoard:async(n,d)=>{const c={boardId:i,sectionId:t},l={boardId:n,sectionId:void 0};s({text:y(o,void 0,d)}),await e(o?(0,x.X_)({source:c,target:l,excludePinIds:r}):(0,x.ic)({source:c,target:l,pinIds:r})),a.go(-2)}}))))((function(e){const i=(0,h.ZP)();return(0,b.jsx)(_,{...e,i18n:i})}))},651392:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(667294),r=t(40142),o=t(883119),s=t(785893);const a=(0,r.connect)((({pins:e},i)=>({selectedPins:(i.selectedPinIds||[]).map((i=>e[i]))})),(()=>({})))((function({selectedPins:e}){const i=(0,n.useRef)();(0,n.useEffect)((()=>{const e=i.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)}),[e]);const t=e.map(((e,i)=>{var t,n,r,a;const{description:d,images:c}=e,l=null==c?void 0:c["236x"];return(0,s.jsx)(o.xu,{marginEnd:1,children:(0,s.jsx)(o.zd,{rounding:2,wash:!0,width:50,height:65,children:(0,s.jsx)(o.Ee,{alt:null!=d?d:"",color:null!==(t=e.dominant_color)&&void 0!==t?t:"",naturalHeight:null!==(n=null==l?void 0:l.height)&&void 0!==n?n:1,naturalWidth:null!==(r=null==l?void 0:l.width)&&void 0!==r?r:1,src:null!==(a=null==l?void 0:l.url)&&void 0!==a?a:"",fit:"contain"})})},i)}));return(0,s.jsx)(o.xu,{display:"flex",overflow:"scroll",marginTop:2,ref:i,children:t})}))},479776:(e,i,t)=>{t.d(i,{t:()=>n,N:()=>r});const n=0,r=1},49018:(e,i,t)=>{t.d(i,{tr:()=>n,UT:()=>r,Ws:()=>o,o4:()=>s,cy:()=>a,U5:()=>d,Jw:()=>c,cK:()=>l,bM:()=>p});const n=3,r=[500742,501040],o="Gender",s="InterestPicker",a="LoadingStep",d="CreatorStep",c="AppInstall",l={NUX_GENDER_STEP_NAME:o,NUX_INTEREST_PICKER_STEP_NAME:s,NUX_LOADING_STEP_NAME:a,NUX_CREATOR_STEP_NAME:d,NUX_APP_INSTALL_STEP_NAME:c},p="mweb_nux_creator_step"},860370:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(40142),r=t(171456),o=t(641483),s=t(174523),a=t(382745),d=t(392280),c=t(24309),l=t(855168),p=t(785893);function h({alignIconLeft:e,bgColor:i,color:t,disableRedirect:h=!1,fallbackUrl:u,icon:g="arrow-back",onTouch:m,padding:x,placement:b,shouldUseFallbackUrl:f,size:_="lg",viewParameter:y,viewType:j}){const S=(0,s.ZP)(),v=(0,l.k6)(),w=(0,l.TH)(),P=(0,n.useSelector)((e=>e.session.isAuthenticated));return(0,p.jsx)(r.ZP,{accessibilityLabel:S._("Back","navigation button","navigation button"),bgColor:i,color:t,icon:g,onTouch:()=>{if((0,d.y3)({action:"back_button_click",placement:b,isAuthenticated:P}),j&&y&&(0,c.So)({view_type:j,view_parameter:y,element:34}),m&&m(),!h){const e=(0,a.Qx)(document.referrer);!e&&(!w.key||w.state&&"redirect"===w.state.referrer||f)&&u?v.replace(u):e?((0,o.ZP)("unauth.backButton.sendToDuploNotAmp"),v.replace(e)):w.pathname.includes("/password/reset/")&&w.search&&w.search.includes("?nativeShouldDismiss=true")?v.push("/login/?dismissWebview=true"):v.goBack()}},padding:x||2,size:_,containerStyle:e?{display:"flex",alignItems:"center",marginLeft:"cancel"===g?"-4px":"-8px",width:"48px",height:"48px"}:{}})}},263336:(e,i,t)=>{t.d(i,{Z:()=>h});var n=t(667294),r=t(40142),o=t(214583),s=t(968807),a=t(174523),d=t(951671),c=t(946753),l=t(883119),p=t(785893);const h=(0,r.connect)(((e,i)=>({board:e.boards[i.boardId]})))((function({board:e,onBoardSelected:i,noArrowIcon:t,showSingleBoardRep:h}){const u=(0,a.ZP)(),g=(0,r.useSelector)((({users:e})=>e)),m=(e.collaborating_users||[]).map((e=>{var i,t;return{name:null!==(i=g[e].username)&&void 0!==i?i:"",src:"https://s.pinimg.com/images/user/default_75.png"===g[e].image_medium_url?"":null!==(t=g[e].image_medium_url)&&void 0!==t?t:""}}));let x="";const b=m.slice(0,3).map((e=>e.name));switch(m.length){case 3:x=(0,c.Wc)(`${u._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${b[0]}`,second:`${b[1]}`,last:`${b[2]}`});break;case 2:x=(0,c.Wc)(`${u._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${b[0]}`,second:`${b[1]}`});break;default:x=b.join(", ")}const f=m.length>3?(0,c.Wc)(u.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",m.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:x,leftCount:""+(m.length-3)}):(0,c.Wc)(`${u._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:x}),_=new l.Ry(0),y=(0,p.jsx)(n.Fragment,{children:(0,p.jsxs)(l.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:h?4:0,children:[(0,p.jsx)(l.xu,{paddingY:h?0:2,children:h?(0,p.jsx)(l.xu,{height:48,overflow:"hidden",width:48,children:(0,p.jsx)(l.zd,{height:"100%",rounding:2,width:"100%",children:(0,p.jsx)(l.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:e.image_cover_url||""})})}):(0,p.jsx)(l.xu,{height:60,overflow:"hidden",rounding:4,width:60,children:(0,p.jsx)(o.ZP,{boardId:e.id,type:"thumbnail",fullSize:!0})})}),(0,p.jsxs)(l.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,p.jsx)(l.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:h?2:4,width:"100%",overflow:h?"hidden":"auto",children:(0,p.jsx)(l.X6,{size:"sm",lineClamp:h?1:void 0,children:e.name})}),(0,p.jsxs)(l.kC,{alignItems:h?"center":"start",justifyContent:"start",children:["secret"===e.privacy&&(0,p.jsx)(l.xu,{marginStart:h?3:1,children:(0,p.jsx)(l.JO,{color:h?"darkGray":"gray",icon:"lock",accessibilityLabel:u._("secret board icon")})}),e.is_collaborative&&h&&m.length>0?(0,p.jsx)(l.xu,{zIndex:_,children:(0,p.jsx)(l.HE,{accessibilityLabel:d.U+f,collaborators:m,size:1===m.length?"sm":"xs"})}):e.is_collaborative&&(0,p.jsx)(l.xu,{marginStart:1,children:(0,p.jsx)(l.JO,{icon:"people",accessibilityLabel:u._("group board icon")})}),!t&&!!e.section_count&&(0,p.jsx)(l.xu,{"data-test-id":"boardSectionPicker",marginStart:h?3:0,children:(0,p.jsx)(l.JO,{color:h?"darkGray":"gray",icon:"arrow-forward",accessibilityLabel:u._("board section board picker icon")})})]})]})]})}),j=e.section_count,S=!!j&&j>0;return(0,p.jsx)(s.Z,{rounding:2,onTouch:()=>i(S),pressState:"none",children:y})}))},387501:(e,i,t)=>{t.d(i,{Z:()=>u});var n=t(40142),r=t(263336),o=t(968807),s=t(883119),a=t(785893);function d({onSectionSelected:e,sectionId:i,showSectionRep:t}){var r;const d=(0,n.useSelector)((({boardsections:e})=>e[i])),c=(0,n.useSelector)((({pins:e})=>{var i;return d&&d.preview_pins&&(null===(i=e[d.preview_pins[0]])||void 0===i?void 0:i.image_medium_url)}));return(0,a.jsx)(o.Z,{rounding:2,onTouch:e,pressState:"none",children:(0,a.jsxs)(s.xu,{"data-test-id":"sectionPickerRow",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:t?4:0,children:[t&&(0,a.jsx)(s.xu,{height:48,width:51,children:(0,a.jsx)(s.zd,{height:"100%",rounding:2,width:"100%",children:(0,a.jsx)(s.Ee,{alt:null!==(r=d.title)&&void 0!==r?r:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:c||""})})}),!t&&(0,a.jsx)(s.xu,{column:1,paddingY:2}),(0,a.jsx)(s.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:t?(0,a.jsx)(s.xu,{overflow:"hidden",width:"100%",marginStart:2,children:(0,a.jsx)(s.X6,{size:"sm",lineClamp:1,children:d.title})}):(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{weight:"bold",children:d.title})})})]})})}var c=t(250766),l=t(855168),p=t(964964),h=t(174523);function u({boardId:e,originalBoardId:i,sectionId:t,repin:o,hideBoardPickerRow:u,showSectionRep:g}){const m=(0,h.ZP)(),{isFetching:x,boardSections:b,filteredBoardSections:f}=((e,i)=>{const{isFetching:t}=(0,p.mi)({name:"BoardSectionsRepinResource",options:{board_id:e}}),r=(0,n.useSelector)((i=>((0,c.T_)(i,{boardId:e})||[]).reduce(((e,i)=>{if("boardsection"===i.type){const t={type:"boardsection",id:i.id};e.push(t)}return e}),[]))),o=(0,n.useSelector)((t=>r.map((e=>e.id)).reduce(((n,r)=>{const o=t.boardsections[null!=r?r:""];return r!==i&&o&&n.push({board:{id:e},id:o.id,title:o.title,type:"boardsection",slug:o.slug}),n}),[])));return{isFetching:t,boardSections:r,filteredBoardSections:o}})(e,t),_=(0,l.k6)(),y=(0,n.useSelector)((({boards:e})=>e[i||""]));return(0,a.jsxs)(s.xu,{children:[b.length>0&&(0,a.jsxs)(s.xu,{paddingY:g?0:3,children:[g&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xu,{marginBottom:2,children:(0,a.jsx)(s.xv,{children:m._("Board","RepinFlow.SectionPickerList.Board","Section picker board title")})})}),!u&&(0,a.jsx)(r.Z,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>o(e,void 0,m),showSingleBoardRep:g},e),g&&(0,a.jsx)(s.xu,{paddingY:4,children:(0,a.jsx)(s.xv,{children:m._("Section","RepinFlow.SectionPickerList.Section","Section picker all sections title")})}),f.map((t=>{var n;return(0,a.jsx)(d,{onSectionSelected:()=>{o(e,t,m),i&&_.push(y.url)},sectionId:null!==(n=t.id)&&void 0!==n?n:"",showSectionRep:g},t.id)}))]}),(0,a.jsx)(s.$j,{accessibilityLabel:m._("Loading board section for repin flow"),show:x})]})}},309220:(e,i,t)=>{t.d(i,{a:()=>r});var n=t(650744);const r=({dispatch:e,i18n:i,showToast:t,newPinId:r,sourcePinId:o,boardId:s,boardSectionId:a,onSuccess:d})=>e((0,n.q$)(r,s,a)).then((()=>{e((0,n.t_)(o,s,a)),t({text:i._("Pin deleted!","Utils.Unsave.Success","User deleted their pin")}),d&&d()})).catch((()=>{t({isError:!0,text:i._("Sorry! There was an error deleting your Pin.","Utils.Unsave.Error","Error when user tried to delete pin")})}))},627832:(e,i,t)=>{t.d(i,{Z:()=>s});var n=t(40142),r=t(855168),o=t(785893);function s(e){return(0,n.useSelector)((({session:e})=>e.isAuthenticated))?null:(0,o.jsx)(r.l_,{to:e})}},392280:(e,i,t)=>{t.d(i,{vR:()=>s,xH:()=>a,h3:()=>d,wp:()=>c,y3:()=>l,Zm:()=>p,BV:()=>h});var n=t(479776),r=t(641483);let o;const s=()=>{const e=o.getState().session;if(!e.isMobile&&!e.isTablet)return"desktop";switch(e.userAgentPlatform){case"ios":return"iphone";case"android":return e.isTablet?"android_tablet":"android";case"ipad":return"ipad";default:return"mobile_other"}},a=(e,i)=>{const t=4===i?3456:3455;return e===n.N?t:3050},d=({action:e,type:i,isCrossDomain:t,isMultipleAccounts:n,trigger:o})=>{(0,r.hL)(`new_mweb_${e}.${s()}${n?".multipleAccounts":""}`,{referrer:(0,r.an)(),type:i,cctld:t}),(0,r.ZP)(`mweb_${e}.${s()}.${(0,r.an)()}.${i}${t?".cctld":""}${n?".multipleAccounts":""}`),(0,r.De)({action:e,event:"success",type:i,trigger:o})},c=({action:e,type:i,error:t,isCrossDomain:n,isMultipleAccounts:o,trigger:a})=>{const d=o?".multipleAccounts":"",c=n?".cctld":"",l={type:i};(0,r.hL)(`new_mweb_${e}_error.${s()}${d}${c}`,l),(0,r.tj)(`mweb_${e}_error.${s()}.${(0,r.an)()}.${i}${c}${d}`,{error:t}),(0,r.De)({action:e,event:"fail",type:i,trigger:a})},l=({action:e,placement:i,isAuthenticated:t})=>{(0,r.ZP)(`mweb_${e}.${String(i)}.is_auth_${String(t)}`)},p=e=>{o=e},h=e=>{(0,r.ZP)(e)}},437523:(e,i,t)=>{t.d(i,{_:()=>a,Z:()=>d});var n=t(667294),r=t(855168),o=t(785893);const s=(0,n.createContext)(!0);function a({children:e}){const i=(0,r.TH)(),[t,a]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{a(!1)}),[i]),(0,o.jsx)(s.Provider,{value:t,children:e})}function d(){return(0,n.useContext)(s)}},670798:(e,i,t)=>{t.d(i,{x8:()=>T,ZP:()=>E});var n=t(667294),r=t(40142),o=t(860370),s=t(214583),a=t(884272),d=t(911506),c=t(437523),l=t(627832),p=t(344422),h=t(583260),u=t(899520),g=t(946753),m=t(931185),x=t(49018),b=t(24309),f=t(309220),_=t(388675),y=t(174523),j=t(650744),S=t(883119),v=t(590307),w=t(708206),P=t(855168),I=t(785893);function B(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const T=(e,i,t)=>{const n=t._("Saved to new board","Board saved message if the new board's name is not found","Board saved message if the new board's name is not found");return[{text:i?(0,g.nk)(t._("Saved to {{ board }}","Board saved message","Board saved message"),{board:i}).join(" "):n,href:e}]},C=e=>({color:e?"#fff":"#333",fontSize:21,fontWeight:"bold",background:"none",outline:"none",border:"none",marginTop:"4px",width:"100%"});class k extends n.PureComponent{constructor(...e){var i;super(...e),i=this,B(this,"state",{boardName:this.props.match.params.boardName||"",canSubmit:!!this.props.match.params.boardName,errorBoardNames:[],secret:!1,submitting:!1}),B(this,"handleRepinSuccess",(()=>this.props.history.go(-2))),B(this,"onSwitchToggle",(()=>{this.setState({secret:!this.state.secret})})),B(this,"onInputChange",(e=>{const i=e.target.value,t=i.trim().length,n=t>0&&t<=100&&!this.state.errorBoardNames.includes(i);this.setState({boardName:i,canSubmit:n})})),B(this,"onCreateClick",(()=>{const{boardName:e,secret:t,submitting:r}=this.state,{createPin:o,createBoard:d,dispatchUnsavePin:c,history:l,i18n:p,location:h,match:u,pin:g,repinToBoard:m,showRepinConfirmation:x,showToast:f,undoSaveAction:y}=this.props;if(r)return;const j=t?"secret":"public",v=u.params.pinId,w=h.state?h.state.pinnedToBoardId:"",P=this.props.i18n._("Created Board!","Text in toast after creating a new board","Text in toast after creating a new board");if(v){const t=(0,a.Z)((h.state||{}).trackingParams,g);this.setState({submitting:!0}),d({name:e,pin:g,privacy:j}).then((async function(n){const r=n.resource_response.data.url;i.setState({submitting:!1}),(0,b.j)({event_type:20,view_type:3,object_id_str:v});const o=n.resource_response.data.id,s=h.state&&h.state.pinDescription?h.state.pinDescription:"",a=T(r,e,p),{isFirstBoardCreateActive:d,isEditingPin:u,pinBoardId:j,pinSectionId:S}=h.state||{},P=()=>x((0,_.YW)({boardId:o,isFBC:d,originalToasts:a}));var I;(s?m({i18n:i.props.i18n,pinId:v,boardId:o,onSuccess:()=>{i.completeFirstExperiences()},onUndo:y,showRepinConfirmation:e=>f(e[0]),trackingParams:{clientTrackingParams:t,pinnedToBoardId:w}}).catch((e=>{f({isError:!0,text:e.message||i.props.i18n._("Sorry! Something went wrong on our end.","error completing repin","error completing repin")})})):(i.completeFirstExperiences(P),(0,b.j)({event_type:5,view_type:3,component:7,object_id_str:v,clientTrackingParams:t,aux_data:{board_id:w,destination_board_id:o}})),u&&g)&&(await c(g.id,j,S),null!==(I=g.pinned_to_board)&&void 0!==I&&I.url&&l.replace(g.pinned_to_board.url))}),(i=>{f({text:i.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0}),this.setState({errorBoardNames:this.state.errorBoardNames.concat(e),canSubmit:!1,submitting:!1})}))}else this.setState({submitting:!0}),d({name:e,pin:g,privacy:j}).then((e=>{const i=e.resource_response.data,t=this.props.location.state;if(!t){this.setState({submitting:!1});const e={text:P};return f((0,_.YW)({boardId:i.id,originalToasts:[e]})[0]),void l.replace(i.url)}const{description:r,guid:a,method:d,url:c}=t,p=[];if("scraped"===t.method)t.imgData.forEach((e=>p.push(o({link:c,image_url:e,description:r,board_id:i.id,method:d,guid:a}))));else{const{base64Image:e,imageUrl:n}=t;p.push(o({link:c,image_url:n,image_base64:e,description:r,board_id:i.id,method:d,guid:a}))}Promise.all(p).then((e=>{f({text:P}),f({text:(0,I.jsxs)(n.Fragment,{children:[(0,I.jsx)(S.xv,{children:this.props.i18n._("Saved to","Saved to {{ boardName }}","Saved to {{ boardName }}")}),(0,I.jsx)(S.xv,{weight:"bold",children:i.name})]}),thumbnail:(0,I.jsx)(S.xu,{width:54,height:54,children:(0,I.jsx)(s.ZP,{boardId:i.id,type:"thumbnail"})})}),(0,b.j)({event_type:1,view_type:92,component:7,object_id_str:e[0].resource_response.data.id}),this.setState({submitting:!1}),l.replace(i.url)}),(()=>{f({text:this.props.i18n._("Sorry! Something went wrong on our end.","error during pin creation","error during pin creation")}),this.setState({submitting:!1})}))}),(e=>{this.setState({submitting:!1}),f({text:e.message_detail||e.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0})}))})),B(this,"completeFirstExperiences",(e=>{const{closeupExperience:i,repinExperience:t,completeExperience:n}=this.props;if(i||t){const r=[];i&&i.placement_id&&x.UT.includes(i.experience_id)&&r.push(n(i.placement_id,i.experience_id)),t&&t.placement_id&&501032===t.experience_id&&r.push(n(t.placement_id,t.experience_id)),r.length>0&&Promise.all(r).then((()=>{this.handleRepinSuccess(),e&&e()}))}else this.handleRepinSuccess(),e&&e()}))}componentDidMount(){const{repinExperience:e,viewExperience:i}=this.props;e&&i(e.placement_id,e.experience_id)}render(){const{i18n:e}=this.props;return(0,I.jsxs)(d.Z,{hasFixedHeader:!0,children:[(0,I.jsx)(u.$l,{children:(0,I.jsxs)(S.kC,{alignItems:"center",justifyContent:"start",children:[(0,I.jsx)(S.xu,{flex:"none",marginStart:-2,children:(0,I.jsx)(o.Z,{})}),(0,I.jsx)(S.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:(0,I.jsx)(S.xv,{align:"center",weight:"bold",children:this.props.i18n._("Create board","Label during board creation","Label during board creation")})}),(0,I.jsx)(S.kC,{alignItems:"stretch",flex:"none",justifyContent:"end",children:(0,I.jsx)(S.xu,{"data-test-id":"createBoardButton",children:(0,I.jsx)(S.zx,{fullWidth:!0,onClick:this.onCreateClick,color:"red",size:"sm",text:this.props.i18n._("Create","Create board button","Create board button"),disabled:!this.state.canSubmit||this.state.submitting})})})]})}),(0,I.jsx)(S.iz,{}),(0,I.jsxs)(S.xu,{paddingY:3,paddingX:4,children:[(0,I.jsx)(S.__,{htmlFor:"boardNameInput",children:(0,I.jsx)(S.xv,{size:"md",children:this.props.i18n._("Board name","Label during board creation","Label during board creation")})}),(0,I.jsx)("input",{id:"boardNameInput",placeholder:e._("Add"),value:this.state.boardName,style:C((0,m.Yc)()),onChange:this.onInputChange})]}),(0,I.jsx)(S.iz,{}),(0,I.jsxs)(S.xu,{display:"flex",justifyContent:"between",paddingY:3,paddingX:4,children:[(0,I.jsx)(S.xv,{children:this.props.i18n._("Keep board secret","Toggle during board creation","Toggle during board creation")}),(0,I.jsx)(S.rs,{id:"secretToggle",switched:this.state.secret,onChange:this.onSwitchToggle})]})]})}}const E=(0,w.compose)(p.Z,P.EN,(0,r.connect)((({experiences:e,pins:i,session:t,users:n},{match:r})=>({closeupExperience:e[1000112],pin:r.params.pinId?i[r.params.pinId]:void 0,repinExperience:e[1000153]})),((e,{location:i,match:t,showToast:n})=>({completeExperience:(i,t)=>e((0,v.CK)(i,t)),viewExperience:(i,t)=>e((0,v.UT)(i,t)),createPin:i=>e((0,j.iX)(i)),createBoard:({name:n,pin:r,privacy:o})=>{const s=t.params.pinId,d=i.state&&i.state.pinDescription?i.state.pinDescription:"";if(s&&!d){const t=(0,a.Z)((i.state||{}).trackingParams,r);return e((0,h.aX)(n,o,s,t))}return e((0,h.aX)(n,o))},undoSaveAction:(i,t,r,o,s)=>(0,f.a)({dispatch:e,i18n:s,showToast:n,newPinId:t,sourcePinId:i,boardId:r,boardSectionId:o}),repinToBoard:({i18n:i,pinId:t,boardId:n,onSuccess:r,onUndo:o,showRepinConfirmation:s,showToast:a,section:d,trackingParams:c})=>e((0,j.wh)({i18n:i,pinId:t,boardId:n,onSuccess:r,onUndo:o,showRepinConfirmation:s,showToast:a,section:d,trackingParams:c})),dispatchUnsavePin:(i,t,n)=>e((0,j.q$)(i,t||"",n))}))))((function(e){const i=(0,c.Z)(),t=(0,y.ZP)(),n=(0,l.Z)("/");return e.match.params.pinId&&i?(0,I.jsx)(P.l_,{to:"/"}):n||(0,I.jsx)(k,{...e,i18n:t})}))},83632:(e,i,t)=>{t.d(i,{ZP:()=>we});var n=t(667294),r=t(40142),o=t(860370),s=t(174523),a=t(583704),d=t(883119),c=t(785893);const l="cubic-bezier(0.66, 0.025, 0.33, 0.975)",p=(0,a.qe)(((e,i,t,n,r)=>{let o=e,s=i,a=0,d=0,c="";const p=Math.floor(i/3);if("shrinkToPin"===t&&(a="24px",d=1,o=Math.floor(3*p/2),s=p),"pinToGrid"===t&&n&&r){const e=n.getBoundingClientRect(),i=r.getBoundingClientRect();c=`translate(${i.x+i.width/2-(e.x+e.width/2)}px, ${i.y+i.height/2-(e.y+e.height/2)}px)`,a="24px 0px 0px 24px",d=1,o=p,s=p}return{borderRadius:a,height:o,opacity:d,overflow:"hidden",width:s,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:`all .42s ${l}`,transition:`all .42s ${l}`}})),h=(0,a.qe)((e=>({opacity:e?1:0,WebkitTransition:`opacity .42s ${l}`,transition:`opacity .42s ${l}`}))),u=(0,a.qe)((e=>({opacity:e?0:1,WebkitTransition:`all .25s ${l}`,transition:`all .25s ${l}`,zIndex:3})));function g({completeExperience:e,pinDominantColor:i,pinImageHeight:t,pinImageWidth:r,pinImageUrl:o}){const a=(0,s.ZP)(),[l,g]=(0,n.useState)("visible"),[m,x]=(0,n.useState)("none");let b,f,_,y;const j=window.innerWidth,S=j*(t/r),v=Math.floor(j/3),w=Math.floor(j/6);(0,n.useEffect)((()=>{o&&"none"===m&&(b=setTimeout((()=>{x("shrinkToPin")}),85)),o&&"shrinkToPin"===m&&(f=setTimeout((()=>{x("pinToGrid")}),2e3)),"pinToGrid"===m&&"visible"===l&&(_=setTimeout((()=>{g("hidden")}),2e3)),"hidden"===l&&(y=setTimeout((()=>{g("none"),e()}),300))})),(0,n.useEffect)((()=>()=>{clearTimeout(b),clearTimeout(f),clearTimeout(_),clearTimeout(y)}),[]);const P=(0,n.useRef)(null),I=(0,n.useRef)(null);return(0,c.jsxs)(d.xu,{alignItems:"center",bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:u("hidden"===l)},direction:"column",display:"none"===l?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,c.jsxs)(d.xu,{height:j/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:h("pinToGrid"===m)},children:(0,c.jsx)(d.zd,{rounding:6,width:v+w+1,height:v,children:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,c.jsx)(d.xu,{width:v,height:v,color:"transparent",ref:I}),(0,c.jsxs)(d.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,c.jsx)(d.xu,{width:w,height:w,color:"lightGray"}),(0,c.jsx)(d.xu,{width:w,height:w,color:"lightGray"})]})]})})}),(0,c.jsx)(d.xu,{ref:P,position:"absolute",dangerouslySetInlineStyle:{__style:p(S,j,m,P.current,I.current)},children:(0,c.jsx)(d.Ee,{alt:a._("Pin image","Pin image on repin page","Pin image on repin page"),src:o,fit:"cover",naturalHeight:t,naturalWidth:r,color:i})})]}),(0,c.jsx)(d.xu,{marginTop:8,marginBottom:8,paddingX:12,children:(0,c.jsx)(d.X6,{align:"center",size:"md",children:a._("Keep your ideas organized by creating a board","boardPicker.edu.heading","board create education shown before user create their first board")})})]})}var m=t(884272),x=t(288453),b=t(911506),f=t(517563),_=t(288177),y=t(544039),j=t(483629),S=t(309220),v=t(650744),w=t(708206);function P(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class I extends n.PureComponent{constructor(...e){super(...e),P(this,"state",{name:""}),P(this,"onNextButtonTouch",(()=>{const{name:e}=this.state,{createSectionAndRepin:i,i18n:t}=this.props;i(e,t)})),P(this,"onNameChange",(e=>{this.setState({name:e.target.value})}))}render(){const{pin:e,useRoundedCorners:i}=this.props,{name:t}=this.state;return(0,c.jsx)(_.Z,{backButtonIcon:"arrow-back",name:t,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[e.id],useRoundedCorners:i})}}const B=(0,w.compose)(y.Z,(0,r.connect)(null,((e,{boardId:i,history:t,isEditingPin:n,onSuccess:r,pin:o,pinBoardId:s,pinSectionId:a,showToast:d,trackingParams:c})=>({createSectionAndRepin:(l,p)=>{const h=e=>d({text:e.message||p._("Sorry! Something went wrong on our end.","error creating board section","error creating board section"),isError:!0});e((0,j.Nv)(i,[],l)).then((l=>{d({text:p._("Section added!")});const u=l.resource_response.data;e((0,v.wh)({i18n:p,pinId:o.id,boardId:i,onSuccess:n?void 0:r,onUndo:(i,t,n,r)=>(0,S.a)({dispatch:e,i18n:p,showToast:d,newPinId:t,sourcePinId:i,boardId:n,boardSectionId:r}),showToast:d,section:u,trackingParams:{clientTrackingParams:c,pinnedToBoardId:o.pinned_to_board?o.pinned_to_board.id:""}})).then((()=>{o&&s&&e((0,v.q$)(o.id,s,a)).then((()=>{var e;return o.pinned_to_board?t.replace(null!==(e=o.pinned_to_board.url)&&void 0!==e?e:""):void 0}))})).catch(h)})).catch(h)}}))))((function(e){const i=(0,s.ZP)();return(0,c.jsx)(I,{...e,i18n:i})}));var T=t(263336);function C({handleSelected:e}){const i=(0,s.ZP)();return(0,c.jsx)(d.iP,{rounding:2,onTap:()=>{e(!1,null)},children:(0,c.jsxs)(d.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[(0,c.jsx)(d.xu,{color:"lightGray",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:(0,c.jsx)(d.JO,{accessibilityLabel:i._("Profile","save.ProfilePickerRow.IconAccessibilityLabel","Accessibility label for icon on option to save Pin to profile"),color:"darkGray",icon:"history",size:22})}),(0,c.jsx)(d.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:(0,c.jsx)(d.X6,{size:"sm",lineClamp:1,children:i._("Profile","save.ProfilePickerRow","Option to save Pin to profile")})})]})})}var k=t(344422),E=t(114978),A=t(181307),R=t(18347);const F=(0,w.compose)(k.Z,(0,r.connect)(null,((e,{history:i,pinDescription:t,pinBoardId:n,pin:r,pinSectionId:o,showRepinConfirmation:s,showToast:a,trackingParams:d,dismissFlyout:c})=>({repin:(t,n)=>(c(),e((0,v.wh)({i18n:n,pinId:r.id,boardId:t,onSuccess:i.goBack,onUndo:(i,t,o,s)=>(0,S.a)({dispatch:e,i18n:n,showToast:a,newPinId:t,sourcePinId:r.id,boardId:o,boardSectionId:s}),showRepinConfirmation:s,trackingParams:d}))),dispatchOneTapSave:i=>e((0,E.a1)({...i})),dispatchUnsavePin:()=>e((0,v.q$)(r.id,n||"",o))}))))((function({boards:e,boardsShortlist:i,dispatchOneTapSave:t,dispatchUnsavePin:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:h,repin:u,saveToProfileEnabled:g,showToast:m}){const x=(0,s.ZP)(),b=o.location.state&&o.location.state.isOneTapSave,f=(0,A.tc)(R.kh),_=async(e,i)=>{if(e&&i)p(i);else{f().anyEnabled&&((0,R.Vl)(),(0,R.gW)());try{const e=await u(null==i?void 0:i.id,x);if(b&&e&&t({boardId:null==i?void 0:i.id,localPinId:e.id,pinId:h.id}),a)if(await r(),l)o.goBack();else if(h.pinned_to_board){var n;o.replace(null!==(n=h.pinned_to_board.url)&&void 0!==n?n:"")}}catch(s){m({isError:!0,text:s.message||x._("Sorry! Something went wrong on our end.","error during repin","error during repin")})}}};let y=[];return y=i?e.filter((e=>i.some((i=>e.id===i.id)))):e.slice(0,3),(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)(d.xu,{paddingY:4,children:[g&&(0,c.jsx)(C,{handleSelected:_}),y.map((e=>(0,c.jsx)(T.Z,{boardId:e.id,onBoardSelected:i=>_(i,e),showSingleBoardRep:!0},e.id)))]}),(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:x._("All boards","RepinFlow.BoardPickerList.AllBoards","Board picker list all boards title")})}),e.map((e=>(0,c.jsx)(T.Z,{boardId:e.id,onBoardSelected:i=>_(i,e),showSingleBoardRep:!0},e.id)))]})]})}));var N=t(455598);const Z=()=>(0,c.jsx)(N.ZP,{name:"mweb_repin_board_rep",children:({anyEnabled:e})=>(0,c.jsx)(d.xu,{color:"lightGray",display:"inlineBlock",height:e?60:42,minWidth:e?60:42,overflow:"hidden",position:"relative",rounding:e?4:2,children:e?(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{color:"white",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,c.jsx)(d.xu,{color:"white",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]}):null})});var D=t(968807),$=t(583260),L=t(670798),W=t(388675),O=t(24309);const U=(0,w.compose)(k.Z,(0,r.connect)((({pins:e,session:i,users:t},{pinId:n})=>({pin:e[n]})),((e,{pinId:i,trackingParams:{clientTrackingParams:t}})=>({createBoard:n=>e((0,$.aX)(n,"public",i,t))}))))((({createBoard:e,isFirstBoard:i,history:t,onFirstBoardCreate:n,pin:r,pinId:o,pinViewParameter:a,showRepinConfirmation:l,titleSuggestions:p,trackingParams:{clientTrackingParams:h}})=>{const u=(0,s.ZP)(),g=(0,A.tc)(R.kh),x=(s,d,c)=>{g().anyEnabled&&((0,R.Vl)(),(0,R.gW)()),(({allSuggestions:e,handleCreateBoard:i,index:t,isFBC:n,pinViewParameter:r})=>{i(),(0,O.So)({aux_data:{board_title_list:JSON.stringify(e),is_fbc:n.toString(),selected_board_title_index:t},component:7,element:23,view_parameter:r,view_type:3})})({allSuggestions:c,handleCreateBoard:()=>{return i?n(d):void e(s=d).then((e=>(t.goBack(),e))).then((e=>{const{data:i}=e.resource_response,{url:t,id:n}=i,d=(0,L.x8)(t,s,u);l((0,W.YW)({boardId:n,originalToasts:d})),(0,O.j)({event_type:5,view_type:3,component:7,view_parameter:a,object_id_str:o,clientTrackingParams:(0,m.Z)(h,r),aux_data:{board_id:n,destination_board_id:n}})}));var s},index:s,isFBC:i,pinViewParameter:a})};return p?p.map(((e,t,n)=>(0,c.jsx)(d.xu,{children:(0,c.jsx)(N.ZP,{name:"mweb_repin_board_suggestions_with_buttons",children:({anyEnabled:r})=>r?(0,c.jsxs)(d.xu,{alignItems:"center",display:"flex",paddingY:2,children:[!i&&(0,c.jsx)(Z,{}),(0,c.jsx)(d.xu,{flex:"grow",marginEnd:4,marginStart:i?0:4,children:(0,c.jsx)(d.X6,{size:"sm",children:e})}),(0,c.jsx)(d.xu,{display:"inlineBlock",flex:"none",children:(0,c.jsx)(d.zx,{fullWidth:!0,onClick:()=>x(t,e,n),size:"lg",text:u._("Create","repin.boardSuggestions.createButton","Button to create the suggested board")})})]}):(0,c.jsx)(D.Z,{onTouch:()=>x(t,e,n),pressState:"none",rounding:2,children:(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[(0,c.jsx)(Z,{}),(0,c.jsx)(d.xu,{column:10,marginStart:3,children:(0,c.jsx)(d.X6,{size:"sm",children:e})})]})},t)})},t))):null}));var z=t(427908),Y=t(679506),H=t(964964);function G({allBoards:e,saveToProfileEnabled:i,boardsShortlist:t,dismissFlyout:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:h,pinBoardId:u,pinDescription:g,pinSectionId:m,trackingParams:x}){const b=(0,s.ZP)();return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{marginTop:2,children:(0,c.jsx)(d.xv,{children:b._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),(0,c.jsx)(F,{boards:e,boardsShortlist:t,dismissFlyout:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:h,pinBoardId:u,pinDescription:g,pinSectionId:m,saveToProfileEnabled:i,trackingParams:x})]})}function X({allBoards:e,boardsShortlist:i,saveToProfileEnabled:t,dismissFlyout:n,history:r,isEditingPin:o,isFirstRepinExperience:a,isFromToast:l,onFirstBoardCreate:p,onSelect:h,pin:u,pinBoardId:g,pinDescription:m,pinSectionId:x,trackingParams:b,titleSuggestions:f}){const _=(0,s.ZP)(),y=a||0===e.length&&!t,j=()=>(0,c.jsx)(U,{history:r,isFirstBoard:y,onFirstBoardCreate:p,pinId:u.id,pinViewParameter:(0,Y.A)(u),titleSuggestions:f,trackingParams:b});return y?(0,c.jsxs)(d.xu,{paddingX:1,children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:_._("Tap to create your first board","CTA for board title suggestions","Explain to user that tapping on suggestion creates a board")})}),j()]}):(0,c.jsxs)(d.xu,{marginBottom:4,children:[(0,c.jsx)(d.xu,{marginBottom:4,children:(0,c.jsx)(d.xv,{children:_._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),(0,c.jsx)(F,{boards:e,boardsShortlist:i,saveToProfileEnabled:t,dismissFlyout:n,history:r,onSelect:h,pinDescription:m,pin:u,trackingParams:b,isEditingPin:o,isFromToast:l,pinBoardId:g,pinSectionId:x}),f?(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(z.Z,{children:(0,c.jsx)(d.iz,{})})}),(0,c.jsx)(d.xu,{paddingY:4,children:(0,c.jsx)(d.xv,{children:_._("Or tap to create a new board","boardPicker.suggestedBoardName.title","Title for repin page suggested board name section")})}),j()]}):(0,c.jsx)(d.xu,{paddingY:6,children:(0,c.jsx)(d.$j,{accessibilityLabel:_._("Loading repin page content"),show:!0})})]})}function M(e){const i=(0,s.ZP)(),{allBoards:t,boardsShortlist:n,saveToProfileEnabled:o,dismissFlyout:a,history:l,isEditingPin:p,isFetchingBoards:h,isFirstRepinExperience:u,isFromToast:g,onFirstBoardCreate:m,onSelect:x,location:b,pin:f,pinBoardId:_,pinDescription:y,pinSectionId:j}=e,S={clientTrackingParams:b.state?b.state.trackingParams:"",pinnedToBoardId:f.pinned_to_board?f.pinned_to_board.id:""},v=(w=f.id,(0,H.mi)({name:"BoardTitleSuggestionsResource",options:{pin_id:w}}),(0,r.useSelector)((({pins:e})=>e[w]?e[w].boardTitleSuggestions:[])));var w;return t.length>0||!h?t.length>=10?(0,c.jsx)(G,{allBoards:t,boardsShortlist:n,dismissFlyout:a,history:l,isEditingPin:p,isFromToast:g,onSelect:x,pin:f,pinBoardId:_,pinDescription:y,pinSectionId:j,saveToProfileEnabled:o,trackingParams:S}):(0,c.jsx)(X,{allBoards:t,boardsShortlist:n,dismissFlyout:a,history:l,isEditingPin:p,isFirstRepinExperience:u,isFromToast:g,onFirstBoardCreate:m,onSelect:x,pin:f,pinBoardId:_,pinDescription:y,pinSectionId:j,saveToProfileEnabled:o,titleSuggestions:v,trackingParams:S}):(0,c.jsx)(d.xu,{paddingY:2,children:(0,c.jsx)(d.$j,{accessibilityLabel:i._("Loading repin page content"),show:!0})})}var q=t(553431),J=t(899520);function V({isEditingPin:e,isFirstBoardCreateActive:i,pin:t,pinBoardId:n,pinDescription:r,pinSectionId:o,trackingParams:a,onTouch:l,useIconWithBackground:p}){const h=(0,s.ZP)();return(0,c.jsx)(J.G_,{height:p?void 0:70,hasTopShadow:p,children:(0,c.jsx)(q.Z,{to:{pathname:`/board/create/${t.id}/`,state:{isFirstBoardCreateActive:i,pinnedToBoardId:t.pinned_to_board?t.pinned_to_board.id:"",pinDescription:r,trackingParams:a,isEditingPin:e,pinBoardId:n,pinSectionId:o}},onTouch:l,pressState:"background",children:(0,c.jsxs)(d.xu,{"data-test-id":"repinCreateBoardButton",display:"flex",alignItems:"center",paddingY:p?0:1,paddingX:p?1:0,children:[p?(0,c.jsx)(d.xu,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,c.jsx)(d.JO,{icon:"add",color:"darkGray",size:20,accessibilityLabel:h._("Create board button")})}):(0,c.jsx)(d.JO,{icon:"add-circle",color:"red",size:38,accessibilityLabel:h._("Create board button")}),(0,c.jsx)(d.xu,{marginStart:p?2:3,children:(0,c.jsx)(d.xv,{weight:"bold",children:h._("Create board","Create new board to Pin to","Create new board to Pin to")})})]})})})}var K=t(387501);const Q=(0,w.compose)(y.Z,(0,r.connect)(null,((e,{boardId:i,onSuccess:t,pin:n,location:{search:r},showToast:o,trackingParams:s,dismissFlyout:a})=>({repin:(d,c)=>{a();const l=(0,m.Z)(s,n),{isEditingPin:p}=f.parse(r);e((0,v.wh)({i18n:c,pinId:n.id,boardId:i,onSuccess:p?void 0:t,onUndo:(i,t,n,r)=>(0,S.a)({dispatch:e,i18n:c,showToast:o,newPinId:t,sourcePinId:i,boardId:n,boardSectionId:r}),showToast:o,section:d,trackingParams:{clientTrackingParams:l,pinnedToBoardId:n.pinned_to_board?n.pinned_to_board.id:""}})).then((()=>{var i;d&&e((0,j.A4)(null!==(i=d.id)&&void 0!==i?i:""))}))},unsaveFromSection:()=>{const{pinBoardId:i,pinSectionId:t}=f.parse(r);return e((0,v.q$)(n.id,i,t))}}))))((function({boardId:e,history:i,location:{search:t},repin:n,showSectionRep:r,unsaveFromSection:o,pin:a}){const d=(0,s.ZP)(),{isEditingPin:l}=f.parse(t);return(0,c.jsx)(K.Z,{boardId:e,repin:async(e,t)=>{var r;(await n(t,d),l)&&(await o(),null!==(r=a.pinned_to_board)&&void 0!==r&&r.url&&i.replace(a.pinned_to_board.url))},showSectionRep:r})}));var ee=t(627832),ie=t(804948),te=t(250766),ne=t(946753);const re=(e,i)=>!(!e||!e.placement_id||e.experience_id!==i);var oe=t(494936);function se(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const ae=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],de=(e,i)=>Math.random()*((e||1)-(i||0))+(i||0),ce=e=>e*(Math.PI/180);class le extends n.PureComponent{constructor(...e){super(...e),se(this,"animationTimer",null),se(this,"canvasRemovalTimer",null),se(this,"childrenContainerRef",(0,n.createRef)()),se(this,"containerRef",(0,n.createRef)()),se(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const e=window.innerWidth,{height:i,top:t}=this.containerRef.current.getBoundingClientRect(),n=document.createElement("canvas");return n.style.position="absolute",n.style.left="0px",n.style.top=t-(e-i)/2+"px",n.style.pointerEvents="none",n.style.width=`${e}px`,n.style.height=`${e}px`,n.width=e,n.height=e,n})),se(this,"explode",(()=>{const e=this.buildCanvas();if(!e)return;const i=this.containerRef.current,t=this.childrenContainerRef.current,n=e.getContext("2d");null==i||i.insertBefore(e,t);const r=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(de(10,30)),color:ae[Math.floor(Math.random()*ae.length)],degree:Number(de(0,360).toFixed(1)),speed:Math.round(de(0,25)),friction:.9,opacity:Number(de(0,.5).toFixed(1)),yVel:0,gravity:.04}))),o=(e,i,t,n)=>{window.requestAnimationFrame((()=>o(e,i,t,n))),i.clearRect(0,0,t,n),e.forEach(((e,t)=>{e.x+=e.speed*Math.cos(ce(e.degree)),e.y+=e.speed*Math.sin(ce(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(i.beginPath(),i.globalAlpha=e.opacity,i.fillStyle=e.color,i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.fill())}))};o(r,n,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{null==i||i.removeChild(e)}),(this.props.delay||0)+1e3)}))}componentDidUpdate(e){const{delay:i,startAnimation:t}=this.props,{startAnimation:n}=e;t&&n!==t&&(this.animationTimer=setTimeout(this.explode,i))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,c.jsx)(d.xu,{ref:this.containerRef,children:(0,c.jsx)(d.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}se(le,"defaultProps",{delay:0});const pe=le;function he(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const ue=(e,i,t)=>{var n,r;const o=[],s=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect(),a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(s&&a){const e={x:a.left-s.left,y:a.top-s.top},i={x:a.width/s.width,y:a.height/s.height};o.push(`translate(${e.x}px, ${e.y}px)`),o.push(`scale(${i.x}, ${i.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ge=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}),me=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"});class xe extends n.PureComponent{constructor(...e){super(...e),he(this,"state",{startAnimation:!1}),he(this,"dismissTimer",null),he(this,"pinRef",(0,n.createRef)()),he(this,"pinDestinationRef",(0,n.createRef)()),he(this,"handleAnimationAndCompletion",(()=>{const{onComplete:e,savePin:i,selectedBoardName:t}=this.props;if(!t)return;const n=this.startAnimation(),r=i(t);Promise.all([n,r]).then((i=>{const[,n]=i;e(n,t)})).catch((e=>{n.then((()=>{e&&e.onError&&e.onError()}))}))})),he(this,"startAnimation",(()=>new Promise((e=>{this.setState({startAnimation:!0},(()=>{this.dismissTimer=setTimeout((()=>{e()}),2600)}))}))))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){const{selectedBoardName:e}=this.props,{startAnimation:i}=this.state;e&&!i&&this.handleAnimationAndCompletion()}render(){const{pinDominantColor:e,pinImageUrl:i,selectedBoardName:t}=this.props,{startAnimation:r}=this.state;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.Le,{top:J.R$,zIndex:new d.Ry(3),children:(0,c.jsx)(d.xu,{display:"flex",color:r?"transparent":"white",justifyContent:"center",alignItems:"center",children:(0,c.jsx)(d.xu,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:ue(r,this.pinRef,this.pinDestinationRef)},children:(0,c.jsx)(d.Ee,{alt:this.props.i18n._("Pin image","Pin image on repin page","Pin image on repin page"),src:i,fit:"cover",naturalHeight:84,naturalWidth:84,color:e})})})}),(0,c.jsx)(d.xu,{color:"white",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:ge(r)},children:(0,c.jsxs)(d.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,c.jsx)(pe,{delay:1200,startAnimation:r,children:(0,c.jsx)(d.zd,{rounding:2,width:148,children:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from(Array(4)).map(((e,i)=>{const t=i<=1,n=i%2,r=0===i?this.pinDestinationRef:null;return(0,c.jsx)(d.xu,{ref:r,color:0===i?"transparent":"lightGray",marginBottom:t?1:0,marginEnd:n?0:1,width:72,height:72},i)}))})})}),(0,c.jsx)(d.xu,{paddingX:4,dangerouslySetInlineStyle:{__style:me(r)},children:(0,c.jsx)(d.X6,{children:(0,ne.nk)(this.props.i18n._("You saved your first Pin to {{ selectedBoardName }}!","First repin confirmation message","First repin confirmation message"),{selectedBoardName:t})})})]})})]})}}const be=function(e){const i=(0,s.ZP)();return(0,c.jsx)(xe,{...e,i18n:i})};var fe=t(590307),_e=t(855168),ye=t(18236);function je(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const Se=(0,r.connect)((({session:e})=>({paddingBottom:72+((0,ye.Rq)(e.userAgentPlatform)?ye.Vf:0)})))((({children:e,paddingBottom:i})=>(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:i}},children:e})));class ve extends n.PureComponent{constructor(...e){super(...e),je(this,"state",{dupeWarningDismissed:!1,pinDescription:(this.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0}),je(this,"saved",(()=>this.setState({saved:!0}))),je(this,"handleBackButtonTouch",(()=>{const{match:{params:{boardId:e}}}=this.props,i=e?34:75;(0,O.So)({view_type:21,view_parameter:87,component:7,element:i})})),je(this,"handleDismissWarningFlyout",(()=>this.setState({dupeWarningDismissed:!0}))),je(this,"handleFirstBoardCreateOnSuccess",((e,i)=>{const{closeupExperience:t,completeExperience:n,history:r,i18n:o,repinExperience:s,showRepinConfirmation:a}=this.props,{boardId:d,boardUrl:c}=e,l=(0,L.x8)(c,i,o);r.goBack(),a((0,W.YW)({boardId:d,isFBC:!0,originalToasts:l})),t&&t.placement_id&&500742===t.experience_id&&n(t.placement_id,t.experience_id),s&&re(s,501032)&&n(s.placement_id,s.experience_id)})),je(this,"handleSetSelectedBoard",(e=>{const{history:i,pin:t}=this.props,{trackingParams:n}=this.state;this.isFirstBoardCreateActive()||i.push(`/board/create/${t.id}/${e}/`,{trackingParams:n}),this.setState({suggestedBoardName:e})})),je(this,"handleFirstBoardCreate",(e=>{const{createBoard:i,history:t,pin:n,showToast:r}=this.props,{trackingParams:o}=this.state;return i(e).then((e=>{const i=e.resource_response.data.id;(0,O.j)({event_type:5,view_type:3,component:7,view_parameter:(0,Y.A)(n),object_id_str:n.id,clientTrackingParams:(0,m.Z)(o,n),aux_data:{board_id:i,destination_board_id:i}});const{data:t}=e.resource_response,{url:r}=t;return{boardId:i,boardUrl:r}}),(e=>{throw{onError:()=>{t.goBack(),r({text:e.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0})}}}))})),je(this,"handleSelectBoard",(e=>{const{history:i,pin:t,location:{search:n}}=this.props,{trackingParams:r}=this.state,{isEditingPin:o,pinBoardId:s,pinSectionId:a}=f.parse(n);o?i.push(`/pin/${t.id}/repin/${e.id}/?isEditingPin=true&pinBoardId=${s}&pinSectionId=${a}`,{trackingParams:r}):i.push({pathname:`/pin/${t.id}/repin/${e.id}/`},{trackingParams:r})})),je(this,"handleClickAddSectionButton",(()=>{const{pin:e,history:i,match:{params:{boardId:t}},location:{search:n}}=this.props;if(!t)return;const{isEditingPin:r,pinBoardId:o,pinSectionId:s}=f.parse(n);r?i.push(`/pin/${e.id}/repin/${t}/add/?isEditingPin=true&pinBoardId=${o}&pinSectionId=${s}`):i.push({pathname:`/pin/${e.id}/repin/${t}/add/`})})),je(this,"handleRepinToExistingSectionSuccess",(()=>this.props.history.go(-2))),je(this,"handleRepinToNewSectionSuccess",(()=>this.props.history.go(-3))),je(this,"handleRepinCreateBoardButtonTouch",(()=>{(0,O.So)({view_type:21,view_parameter:87,component:7,element:249})})),je(this,"renderCreateScreen",(()=>{const{pin:e,history:i,location:{search:t},match:{params:{boardId:n}}}=this.props,{pinDescription:r,trackingParams:o}=this.state,{isEditingPin:s,pinBoardId:a,pinSectionId:d}=f.parse(t);return!!n&&(0,c.jsx)(B,{boardId:n,history:i,isEditingPin:s,pinBoardId:a,pinSectionId:d,onSuccess:this.handleRepinToNewSectionSuccess,pin:e,pinDescription:r.trim(),trackingParams:o,useRoundedCorners:!0})})),je(this,"isFirstBoardCreateActive",(()=>{const{allBoards:e,isFetchingBoards:i,saveToProfileEnabled:t,repinExperience:n}=this.props;return!!re(n,501032)||!i&&0===e.length&&!t})),je(this,"isBoardCreateEduActive",(()=>{const{repinExperience:e}=this.props;return re(e,501021)})),je(this,"completeBoardCreateEduExperience",(()=>{const{completeExperience:e,repinExperience:i}=this.props;i&&this.isBoardCreateEduActive()&&e(i.placement_id,i.experience_id)})),je(this,"renderPicker",(()=>{var e,i;const{allBoards:t,saveToProfileEnabled:n,boardsShortlist:r,history:s,isFetchingBoards:a,location:l,pin:p,match:{params:{boardId:h}},location:{search:u}}=this.props,{pinDescription:m,dupeWarningDismissed:x,saved:_,suggestedBoardName:y,trackingParams:j,warningAnchor:S}=this.state,v=m.trim(),w=p.pinned_to_board,P=w?(0,ne.nk)(this.props.i18n._("Psst! You already saved this Pin to {{ board_name }}","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:w.name}).join(" "):null,{dominant_color:I}=p,B=p.images?p.images["236x"]:null,T=B?B.url:"",{isEditingPin:C,isFromToast:k,pinBoardId:E,pinSectionId:A}=f.parse(u),R=this.props.i18n._("Save Pin to","RepinPage.Section.Header.Title","title for section selection in repin flow"),F=new d.Ry(2),N=this.props.i18n._("Create board","Title for first board create",'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),Z=this.props.i18n._("Save to board","boardPicker.header","Title for repin page"),D=h?R:0!==t.length||a||n?Z:N;return(0,c.jsxs)(b.Z,{hasFixedHeader:!0,children:[(0,c.jsx)(J.$l,{useRoundedCorners:!0,zIndex:F,children:(0,c.jsxs)(d.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,c.jsx)(d.xu,{column:2,children:(0,c.jsx)(o.Z,{color:"darkGray",icon:h?"arrow-back":"cancel",onTouch:this.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),(0,c.jsx)(d.xu,{column:8,children:(0,c.jsx)(d.xv,{align:"center",weight:"bold",children:D})}),(0,c.jsx)(d.xu,{column:2})]})}),p.images&&(this.isFirstBoardCreateActive()?(0,c.jsx)(be,{onComplete:this.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=I?I:"",pinImageUrl:null!=T?T:"",savePin:this.handleFirstBoardCreate,selectedBoardName:y}):null),(0,c.jsx)(Se,{children:h?(0,c.jsx)(Q,{boardId:h,onSuccess:this.handleRepinToExistingSectionSuccess,pin:p,pinDescription:v,trackingParams:j,dismissFlyout:this.saved,showSectionRep:!0,history:s,location:l}):(0,c.jsx)(M,{allBoards:t,boardsShortlist:r,saveToProfileEnabled:n,history:s,isFetchingBoards:a,isFirstRepinExperience:this.isFirstBoardCreateActive(),isFromToast:k,location:l,onFirstBoardCreate:this.handleSetSelectedBoard,onSelect:this.handleSelectBoard,pin:p,pinDescription:v,dismissFlyout:this.saved,isEditingPin:C,pinBoardId:E,pinSectionId:A})}),h?(0,c.jsx)(ie.Wx,{onAddNewSection:this.handleClickAddSectionButton,useIconWithBackground:!0}):(0,c.jsx)(V,{history:s,isFirstBoardCreateActive:this.isFirstBoardCreateActive(),pin:p,pinDescription:v,trackingParams:j,onTouch:this.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:C,pinBoardId:E,pinSectionId:A}),B&&this.isBoardCreateEduActive()&&(0,c.jsx)(g,{completeExperience:this.completeBoardCreateEduExperience,pinDominantColor:null!=I?I:"",pinImageHeight:null!==(e=B.height)&&void 0!==e?e:1,pinImageWidth:null!==(i=B.width)&&void 0!==i?i:1,pinImageUrl:null!=T?T:""}),S&&!_&&p.pinned_to_board&&!x&&P&&(0,c.jsx)(d.J2,{anchor:S,color:"red",idealDirection:"down",onDismiss:this.handleDismissWarningFlyout,shouldFocus:!1,children:(0,c.jsx)(d.xu,{padding:3,children:(0,c.jsx)(d.xv,{color:"white",weight:"bold",children:(0,c.jsx)("span",{children:P})})})})]})}))}componentDidMount(){const{repinExperience:e,triggerExperimentsForPlacement:i,viewExperience:t}=this.props;i(1000153),e&&t(1000153,e.experience_id)}render(){return(0,c.jsx)(x.Z,{isOpen:!0,type:"repinPage",hasCustomHeight:!0,isLegoModal:!0,childPaddingX:2,childPaddingY:0,children:(0,c.jsxs)(_e.rs,{children:[(0,c.jsx)(_e.AW,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,c.jsx)(_e.AW,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,c.jsx)(_e.AW,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})}}const we=(0,w.compose)(_e.EN,k.Z,(0,r.connect)((({experiences:e,pins:i,session:t,users:n},{match:r})=>({closeupExperience:e[1000112],repinExperience:e[1000153]})),((e,{location:i,match:t})=>{const n=t.params.id,r=(0,m.Z)((i.state||{}).trackingParams);return{completeExperience:(i,t)=>e((0,fe.CK)(i,t)),triggerExperimentsForPlacement:i=>e((0,fe.kd)(i)),viewExperience:(i,t)=>e((0,fe.UT)(i,t)),createBoard:i=>e((0,$.aX)(i,"public",n,r))}})))((function(e){const{match:{params:{id:i}}}=e,t=(0,s.ZP)(),n=(0,r.useSelector)((e=>e.session.userId)),o=(0,r.useSelector)((e=>e.users[n])),a=(0,A.tc)("mweb_boardless_pins"),d=o.has_quicksave_board&&a().anyEnabled,l=(0,A.tc)(oe._7),p=o.has_quicksave_board&&l().anyEnabled,h=(0,ee.Z)(`/pin/${i}/`),u=(g=i,(0,H.mi)({name:"PinResource",options:{id:g,field_set_key:"repin"}}),(0,r.useSelector)((({pins:e})=>e[g])));var g;const{isFetching:m,allBoards:x,boardsShortlist:b}=(e=>{const i=(0,r.useSelector)((e=>e.session.userId)),{isFetching:t}=(0,H.mi)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:i}});return{isFetching:t,allBoards:(0,r.useSelector)((e=>(0,te.Is)(e)||[])),boardsShortlist:(0,r.useSelector)((({pins:i})=>i[e]&&i[e].boards_shortlist||[]))}})(i);return(0,H.Wf)({name:"UserResource",options:{user_id:n,field_set_key:"quicksave"}}),h||!!u&&(0,c.jsx)(ve,{...e,i18n:t,pin:u,allBoards:x,saveToProfileEnabled:d||p,boardsShortlist:b,isFetchingBoards:m})}))},583704:(e,i,t)=>{t.d(i,{_Y:()=>n,xZ:()=>o,qe:()=>s,HP:()=>a});const n=(e,i)=>e.length===i.length&&e.every(((e,t)=>function(e,i){if("object"==typeof e&&"object"==typeof i){const t=Object.keys(e),n=Object.keys(i);return t.length===n.length&&t.every((t=>e[t]===i[t]))}return e===i}(e,i[t]))),r=(e,i)=>e.length===i.length&&e.every(((e,t)=>e===i[t])),o=(e,i=r)=>t=>{const n=[];return function(...r){const o=this,s=n.find((e=>e.context===o&&i(e.args,r)));if(s)return s.result;const a={context:o,args:r,result:t.apply(this,r)};return n.push(a),e&&n.length>e&&n.shift(),a.result}},s=o(1),a=o()}},e=>{var i=i=>e(e.s=i);e.O(0,[97270,83119,82331,68798,87577,12506,1466,99520,50744,14833,59312,85158,88453,18259],(()=>(i(237948),i(584948),i(646195),i(148643))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-mobile-830ce72c77117c2d.mjs.map